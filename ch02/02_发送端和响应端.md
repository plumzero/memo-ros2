
参考:
- [Writing a simple service and client (C++)](https://docs.ros.org/en/foxy/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Service-And-Client.html)

本测试需要依赖 example_interfaces 。它的功能包创建参考[示例接口文件](示例接口文件.md)。

在工作空间下，执行下面的命令创建一个功能包 demo2_package:
```s
  cd src
  ros2 pkg create --build-type ament_cmake demo2_package --dependencies rclcpp example_interfaces
```

编译 example_interfaces 功能包:
```s
  colcon build --packages-select example_interfaces
```

### 创建服务节点

```s
  cd src/demo2_package/src
  touch two_ints_server.cpp
```

### 创建客户节点

```s
  cd src/demo2_package/src
  touch two_ints_client.cpp
```

### 依赖项

此处不需要修改 package.xml 文件。

### 编译规则

将下面的代码添加到 CMakeLists.txt 文件中:
```cmake
...
add_executable(two_ints_server src/two_ints_server.cpp)
ament_target_dependencies(two_ints_server rclcpp example_interfaces)
add_executable(two_ints_client src/two_ints_client.cpp)
ament_target_dependencies(two_ints_client rclcpp example_interfaces)

install(TARGETS
  two_ints_server
  two_ints_client
  DESTINATION lib/${PROJECT_NAME})
...
```

### 编译运行

编译这个功能包:
```s
  rosdep install -i --from-path src --rosdistro foxy -y
  colcon build --packages-select demo2_package
```

运行:
```s
  source install/setup.bash
  ros2 run demo2_package two_ints_server
  ros2 run demo2_package two_ints_client 11 55
```

也可以执行下面的命令代替客户端测试:
```s
  ros2 service call /add_two_ints example_interfaces/srv/TwoInts "{a: 11, b: 55}"
```
