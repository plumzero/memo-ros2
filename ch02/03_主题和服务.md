
参考:
- [Creating custom msg and srv files](https://docs.ros.org/en/foxy/Tutorials/Beginner-Client-Libraries/Custom-ROS2-Interfaces.html)
- [Implementing custom interfaces](https://docs.ros.org/en/foxy/Tutorials/Beginner-Client-Libraries/Single-Package-Define-And-Use-Interface.html)

本测试需要依赖 tutorial_interfaces 。它的功能包创建参考[向导接口文件](向导接口文件.md)。

在工作空间下，执行下面的命令创建一个功能包 demo3_package:
```s
  cd src
  ros2 pkg create --build-type ament_cmake demo3_package --dependencies rclcpp tutorial_interfaces
```

编译 tutorial_interfaces 功能包:
```s
  colcon build --packages-select tutorial_interfaces
```

### 主题消息的发布与订阅

创建 publisher_member_function.cpp 和 subscriber_member_function.cpp 文件后，添加代码到 CMakeLists.txt。

编译:
```s
  colcon build --packages-select demo3_package
```

运行:
```s
  source install/setup.bash
  ros2 run demo3_package publisher_member_function
  ros2 run demo3_package subscriber_member_function
```

### 服务消息的发送与响应

创建 add_three_ints_server.cpp 和 add_three_ints_client.cpp 文件后，添加代码到 CMakeLists.txt。

编译:
```s
  colcon build --packages-select demo3_package
```

运行:
```s
  source install/setup.bash
  ros2 run demo3_package add_three_ints_server
  ros2 run demo3_package add_three_ints_client 11 22 33
```

也可以执行下面的命令代替客户端测试:
```s
  ros2 service call /add_three_ints tutorial_interfaces/srv/AddThreeInts "{a: 11, b: 22, c: 33}"
```