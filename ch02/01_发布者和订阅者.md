

参考:
- [Creating a workspace](https://docs.ros.org/en/foxy/Tutorials/Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html)
- [Creating a package](https://docs.ros.org/en/foxy/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html)
- [Writing a simple publisher and subscriber (C++)](https://docs.ros.org/en/foxy/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Publisher-And-Subscriber.html)

在工作空间下，执行下面的命令创建一个功能包 demo_package:
```s
  cd src
  ros2 pkg create --build-type ament_cmake demo_package --dependencies rclcpp std_msgs
```

编译这个功能包:
```s
  colcon build --packages-select demo_package
```

接下来以 demo_package 功能包进行测试。

### 创建发布者

```s
  cd src/demo_package/src
  touch publisher.cpp
```

### 创建订阅者

```s
  cd src/demo_package/src
  touch subscriber.cpp
```

### 依赖项

即 package.xml 文件，一般不需要修改。

### 编译规则

即 CMakeLists.txt 文件，稍有修改(添加待编译文件)。
```s
...
add_executable(talker src/publisher.cpp)
ament_target_dependencies(talker rclcpp std_msgs)
add_executable(listener src/subscriber.cpp)
ament_target_dependencies(listener rclcpp std_msgs)
...
install(TARGETS 
  talker
  listener
  DESTINATION lib/${PROJECT_NAME})
...
```

### 编译运行

编译:
```s
  rosdep install -i --from-path src --rosdistro foxy -y
  colcon build --packages-select demo_package
```

运行:
```s
  source install/setup.bash
  ros2 run demo_package listener
  ros2 run demo_package talker
```

查看:
```s
  ros2 topic info /topic --verbose
```
